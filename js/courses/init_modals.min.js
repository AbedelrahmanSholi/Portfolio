function initializeCourseModals() {
const courseCards = document.querySelectorAll('.course-card');
courseCards.forEach(card => {
const exploreBtn = card.querySelector('.explore-btn');
if (exploreBtn) {
exploreBtn.addEventListener('click', function(e) {
e.preventDefault();
const courseId = this.getAttribute('data-course');
openCourseModal(courseId);
});
}
});
document.addEventListener('click', function(e) {
if (e.target.classList.contains('close-modal') || e.target.classList.contains('course-modal')) {
closeCourseModal();
}
});
document.addEventListener('click', function(e) {
const moduleHeader = e.target.classList.contains('module-header') ? 
e.target : 
e.target.closest('.module-header');
if (moduleHeader) {
const moduleItem = moduleHeader.closest('.module-item');
if (!moduleItem) return; 
const moduleContent = moduleItem.querySelector('.module-content');
const moduleToggle = moduleItem.querySelector('.module-toggle');
if (!moduleContent || !moduleToggle) return; 
moduleContent.classList.toggle('active');
if (moduleContent.classList.contains('active')) {
moduleToggle.innerHTML = 'âˆ’';
const contentDiv = moduleContent.querySelector('.markdown-content');
if (contentDiv && contentDiv.textContent.trim() === 'Loading content...') {
const contentId = contentDiv.id;
if (typeof loadModuleContentDirectly === 'function') {
loadModuleContentDirectly(contentId);
} else if (typeof loadContent === 'function') {
const courseId = moduleItem.id.split('-')[1];
const moduleId = moduleItem.id.split('-')[2];
loadContent(contentId, `/courses/${courseId}/${moduleId}.html`);
}
}
if (moduleContent.querySelector('.mermaid')) {
if (typeof mermaid !== 'undefined') {
mermaid.init(undefined, moduleContent.querySelectorAll('.mermaid'));
}
}
if (typeof hljs !== 'undefined') {
moduleContent.querySelectorAll('pre code').forEach((block) => {
hljs.highlightBlock(block);
});
}
} else {
moduleToggle.innerHTML = '+';
}
}
});
document.querySelectorAll('.module-content.active').forEach(module => {
const contentDiv = module.querySelector('.markdown-content');
if (contentDiv && contentDiv.textContent.trim() === 'Loading content...') {
const contentId = contentDiv.id;
if (typeof loadModuleContentDirectly === 'function') {
loadModuleContentDirectly(contentId);
}
}
});
}
