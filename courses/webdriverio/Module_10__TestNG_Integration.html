<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Security Meta Tags -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self';">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), speaker=()">

    <link rel="stylesheet" href="../../css/courses/course_portfolio_style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 10: TestNG Integration</title>
    <link rel="stylesheet" href="../../css/courses/enhanced_course_styling.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="../../js/courses/mermaid_loader.js"></script>

    <script src="../../js/courses/diagram_loader.js"></script></head>

<body>
    <div class="course-content-wrapper">
        <div class="module-navigation">
            <a href="Module_9__Custom_Commands_and_Utilities.html" class="nav-btn prev-btn">
                <i class="fas fa-chevron-left"></i> Previous: Custom Commands and Utilities
            </a>
            <a href="Module_11__Real-World_Project_Implementation.html" class="nav-btn next-btn">
                Next: Real-World Project Implementation <i class="fas fa-chevron-right"></i>
            </a>
        </div>

        <h1 id="module-10-testng-integration">Module 10: TestNG Integration</h1>

<h2 id="overview">Overview</h2>

<p>TestNG is a powerful testing framework for Java that offers advanced features for test organization, execution, and reporting. This module covers the integration of WebDriverIO with TestNG, allowing you to leverage TestNG's capabilities while using WebDriverIO for browser automation.</p>

<h2 id="learning-objectives">Learning Objectives</h2>

<p>By the end of this module, you will be able to:</p>

<ol>
<li>Set up a WebDriverIO project with TestNG integration</li>
<li>Implement TestNG annotations and features in WebDriverIO tests</li>
<li>Create data-driven tests using TestNG data providers</li>
<li>Configure parallel test execution with TestNG</li>
<li>Generate and customize TestNG reports</li>
</ol>

<h2 id="1-introduction-to-testng-with-webdriverio">1. Introduction to TestNG with WebDriverIO</h2>

<h3 id="11-why-integrate-testng-with-webdriverio">1.1 Why Integrate TestNG with WebDriverIO?</h3>

<p>TestNG offers several advantages when integrated with WebDriverIO:</p>

<ol>
<li><strong>Advanced Test Organization</strong>: TestNG provides a robust framework for organizing tests into suites, groups, and dependencies.</li>
<li><strong>Powerful Annotations</strong>: TestNG's annotation system offers fine-grained control over test execution flow.</li>
<li><strong>Data-Driven Testing</strong>: TestNG's data provider mechanism simplifies parameterized testing.</li>
<li><strong>Parallel Execution</strong>: TestNG has built-in support for parallel test execution.</li>
<li><strong>Comprehensive Reporting</strong>: TestNG generates detailed HTML reports and can be integrated with other reporting tools.</li>
</ol>

<h3 id="12-testng-vs-other-testing-frameworks">1.2 TestNG vs. Other Testing Frameworks</h3>

<p>Comparing TestNG with other frameworks commonly used with WebDriverIO:</p>

<table>
<thead>
<tr>
  <th>Feature</th>
  <th>TestNG</th>
  <th>Mocha</th>
  <th>Jasmine</th>
  <th>Cucumber</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Language</td>
  <td>Java</td>
  <td>JavaScript</td>
  <td>JavaScript</td>
  <td>Gherkin/JavaScript</td>
</tr>
<tr>
  <td>Annotations</td>
  <td>Yes</td>
  <td>No</td>
  <td>No</td>
  <td>No</td>
</tr>
<tr>
  <td>Data-Driven Testing</td>
  <td>Built-in</td>
  <td>Limited</td>
  <td>Limited</td>
  <td>Scenario Outlines</td>
</tr>
<tr>
  <td>Parallel Execution</td>
  <td>Built-in</td>
  <td>Limited</td>
  <td>Limited</td>
  <td>Requires configuration</td>
</tr>
<tr>
  <td>Dependency Management</td>
  <td>Yes</td>
  <td>No</td>
  <td>No</td>
  <td>No</td>
</tr>
<tr>
  <td>Grouping</td>
  <td>Yes</td>
  <td>Limited</td>
  <td>Limited</td>
  <td>Tags</td>
</tr>
<tr>
  <td>Reporting</td>
  <td>Built-in</td>
  <td>Requires plugins</td>
  <td>Requires plugins</td>
  <td>Requires plugins</td>
</tr>
</tbody>
</table>

<h3 id="13-architecture-overview">1.3 Architecture Overview</h3>

<p>The integration architecture typically involves:</p>

<ol>
<li><strong>WebDriverIO</strong>: Handles browser automation and element interactions</li>
<li><strong>TestNG</strong>: Manages test execution, organization, and reporting</li>
<li><strong>Java Bindings</strong>: Connect WebDriverIO (JavaScript) with TestNG (Java)</li>
<li><strong>Selenium Server</strong>: Acts as a bridge between WebDriverIO and browsers</li>
</ol>

<pre><code>┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   TestNG    │────▶│ Java WebDriverIO │────▶│ Selenium   │────▶│  Browser   │
│  Framework  │     │   Bindings   │     │   Server    │     │            │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
</code></pre>

<h2 id="2-setting-up-webdriverio-with-testng">2. Setting Up WebDriverIO with TestNG</h2>

<h3 id="21-prerequisites">2.1 Prerequisites</h3>

<p>Before setting up WebDriverIO with TestNG, ensure you have:</p>

<ol>
<li>Java Development Kit (JDK) 8 or higher</li>
<li>Maven or Gradle for dependency management</li>
<li>Node.js and npm (for WebDriverIO)</li>
<li>An IDE like IntelliJ IDEA or Eclipse</li>
</ol>

<h3 id="22-project-setup">2.2 Project Setup</h3>

<h4 id="221-maven-project-setup">2.2.1 Maven Project Setup</h4>

<p>Create a Maven project with the following <code>pom.xml</code>:</p>

<pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;webdriverio-testng&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;properties&gt;
        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;
        &lt;testng.version&gt;7.4.0&lt;/testng.version&gt;
        &lt;selenium.version&gt;4.1.0&lt;/selenium.version&gt;
        &lt;webdrivermanager.version&gt;5.0.3&lt;/webdrivermanager.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- TestNG --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.testng&lt;/groupId&gt;
            &lt;artifactId&gt;testng&lt;/artifactId&gt;
            &lt;version&gt;${testng.version}&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- Selenium WebDriver --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;
            &lt;version&gt;${selenium.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- WebDriverManager --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;
            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;
            &lt;version&gt;${webdrivermanager.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.0-M5&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;suiteXmlFiles&gt;
                        &lt;suiteXmlFile&gt;testng.xml&lt;/suiteXmlFile&gt;
                    &lt;/suiteXmlFiles&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>

<h4 id="222-gradle-project-setup">2.2.2 Gradle Project Setup</h4>

<p>Alternatively, create a Gradle project with the following <code>build.gradle</code>:</p>

<pre><code>plugins {
    id 'java'
}

group 'com.example'
version '1.0-SNAPSHOT'

sourceCompatibility = 11

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.testng:testng:7.4.0'
    implementation 'org.seleniumhq.selenium:selenium-java:4.1.0'
    implementation 'io.github.bonigarcia:webdrivermanager:5.0.3'
}

test {
    useTestNG() {
        suites 'src/test/resources/testng.xml'
    }
}
</code></pre>

<h3 id="23-webdriverio-setup">2.3 WebDriverIO Setup</h3>

<h4 id="231-webdriverio-installation">2.3.1 WebDriverIO Installation</h4>

<p>Install WebDriverIO and required dependencies:</p>

<pre><code>npm init -y
npm install @wdio/cli --save-dev
npx wdio config
</code></pre>

<p>During the configuration wizard, select:</p>

<ul>
<li>TestNG as the testing framework</li>
<li>Other desired services and reporters</li>
</ul>

<h4 id="232-webdriverio-configuration">2.3.2 WebDriverIO Configuration</h4>

<p>Create a <code>wdio.conf.js</code> file:</p>

<pre><code>exports.config = {
    runner: 'local',
    specs: [
        './src/test/java/**/*.java'
    ],
    exclude: [],
    maxInstances: 10,
    capabilities: [{
        maxInstances: 5,
        browserName: 'chrome',
        acceptInsecureCerts: true
    }],
    logLevel: 'info',
    bail: 0,
    baseUrl: 'http://localhost',
    waitforTimeout: 10000,
    connectionRetryTimeout: 120000,
    connectionRetryCount: 3,
    framework: 'testng',
    reporters: ['spec'],
    services: ['chromedriver'],
    testng: {
        // TestNG specific configuration
        suiteXmlFiles: ['./testng.xml']
    }
};
</code></pre>

<h3 id="24-testng-configuration">2.4 TestNG Configuration</h3>

<p>Create a <code>testng.xml</code> file in the project root or in <code>src/test/resources</code>:</p>

<pre><code>&lt;!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd"&gt;
&lt;suite name="WebDriverIO TestNG Suite" verbose="1"&gt;
    &lt;test name="WebDriverIO Tests"&gt;
        &lt;classes&gt;
            &lt;class name="com.example.tests.LoginTest"/&gt;
            &lt;class name="com.example.tests.HomePageTest"/&gt;
        &lt;/classes&gt;
    &lt;/test&gt;
&lt;/suite&gt;
</code></pre>

<h2 id="3-testng-annotations-with-webdriverio">3. TestNG Annotations with WebDriverIO</h2>

<h3 id="31-basic-testng-annotations">3.1 Basic TestNG Annotations</h3>

<p>TestNG provides annotations to control test execution flow:</p>

<pre><code>package com.example.tests;

import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.annotations.*;

public class BasicTest {

    protected WebDriver driver;

    @BeforeSuite
    public void beforeSuite() {
        System.out.println("Before Suite: Setting up WebDriverManager");
        WebDriverManager.chromedriver().setup();
    }

    @BeforeClass
    public void beforeClass() {
        System.out.println("Before Class: Initializing test class");
    }

    @BeforeMethod
    public void beforeMethod() {
        System.out.println("Before Method: Setting up WebDriver");
        driver = new ChromeDriver();
        driver.manage().window().maximize();
    }

    @Test
    public void testExample() {
        System.out.println("Test: Executing test");
        driver.get("https://example.com");
        assert driver.getTitle().contains("Example");
    }

    @AfterMethod
    public void afterMethod() {
        System.out.println("After Method: Closing WebDriver");
        if (driver != null) {
            driver.quit();
        }
    }

    @AfterClass
    public void afterClass() {
        System.out.println("After Class: Cleaning up test class");
    }

    @AfterSuite
    public void afterSuite() {
        System.out.println("After Suite: Final cleanup");
    }
}
</code></pre>

<h3 id="32-testng-annotation-hierarchy">3.2 TestNG Annotation Hierarchy</h3>

<p>TestNG executes annotations in the following order:</p>

<ol>
<li><code>@BeforeSuite</code></li>
<li><code>@BeforeTest</code></li>
<li><code>@BeforeClass</code></li>
<li><code>@BeforeGroups</code></li>
<li><code>@BeforeMethod</code></li>
<li><code>@Test</code></li>
<li><code>@AfterMethod</code></li>
<li><code>@AfterGroups</code></li>
<li><code>@AfterClass</code></li>
<li><code>@AfterTest</code></li>
<li><code>@AfterSuite</code></li>
</ol>

<h3 id="33-webdriverio-integration-with-testng-annotations">3.3 WebDriverIO Integration with TestNG Annotations</h3>

<p>Integrate WebDriverIO commands within TestNG annotations:</p>

<pre><code>package com.example.tests;

import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.annotations.*;

import java.time.Duration;

public class LoginTest {

    protected WebDriver driver;
    protected WebDriverWait wait;

    @BeforeSuite
    public void setupWebDriverManager() {
        WebDriverManager.chromedriver().setup();
    }

    @BeforeMethod
    public void setupWebDriver() {
        driver = new ChromeDriver();
        driver.manage().window().maximize();
        wait = new WebDriverWait(driver, Duration.ofSeconds(10));
    }

    @Test
    public void testLogin() {
        // Navigate to the login page
        driver.get("https://example.com/login");

        // Find and interact with elements
        WebElement usernameField = wait.until(
            ExpectedConditions.visibilityOfElementLocated(By.id("username"))
        );
        usernameField.sendKeys("testuser");

        WebElement passwordField = driver.findElement(By.id("password"));
        passwordField.sendKeys("password123");

        WebElement loginButton = driver.findElement(By.id("login-button"));
        loginButton.click();

        // Wait for successful login
        WebElement welcomeMessage = wait.until(
            ExpectedConditions.visibilityOfElementLocated(By.className("welcome-message"))
        );

        // Assert the welcome message
        Assert.assertTrue(welcomeMessage.getText().contains("Welcome, Test User"));
    }

    @AfterMethod
    public void tearDown() {
        if (driver != null) {
            driver.quit();
        }
    }
}
</code></pre>

<h2 id="4-advanced-testng-features-with-webdriverio">4. Advanced TestNG Features with WebDriverIO</h2>

<h3 id="41-test-groups">4.1 Test Groups</h3>

<p>Organize tests into logical groups:</p>

<pre><code>package com.example.tests;

import org.testng.annotations.Test;

public class GroupedTests {

    @Test(groups = {"smoke"})
    public void smokeTest1() {
        // Test implementation
    }

    @Test(groups = {"smoke"})
    public void smokeTest2() {
        // Test implementation
    }

    @Test(groups = {"regression"})
    public void regressionTest1() {
        // Test implementation
    }

    @Test(groups = {"regression", "critical"})
    public void criticalRegressionTest() {
        // Test implementation
    }
}
</code></pre>

<p>Configure groups in <code>testng.xml</code>:</p>

<pre><code>&lt;!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd"&gt;
&lt;suite name="Grouped Tests Suite"&gt;
    &lt;test name="Smoke Tests"&gt;
        &lt;groups&gt;
            &lt;run&gt;
                &lt;include name="smoke"/&gt;
            &lt;/run&gt;
        &lt;/groups&gt;
        &lt;classes&gt;
            &lt;class name="com.example.tests.GroupedTests"/&gt;
        &lt;/classes&gt;
    &lt;/test&gt;

    &lt;test name="Regression Tests"&gt;
        &lt;groups&gt;
            &lt;run&gt;
                &lt;include name="regression"/&gt;
            &lt;/run&gt;
        &lt;/groups&gt;
        &lt;classes&gt;
            &lt;class name="com.example.tests.GroupedTests"/&gt;
        &lt;/classes&gt;
    &lt;/test&gt;
&lt;/suite&gt;
</code></pre>

<h3 id="42-test-dependencies">4.2 Test Dependencies</h3>

<p>Define dependencies between tests:</p>

<pre><code>package com.example.tests;

import org.testng.annotations.Test;

public class DependentTests {

    @Test(groups = {"setup"})
    public void setupEnvironment() {
        // Set up test environment
        System.out.println("Setting up test environment");
    }

    @Test(dependsOnMethods = {"setupEnvironment"})
    public void testFeature1() {
        // Test feature 1
        System.out.println("Testing feature 1");
    }

    @Test(dependsOnMethods = {"setupEnvironment"})
    public void testFeature2() {
        // Test feature 2
        System.out.println("Testing feature 2");
    }

    @Test(dependsOnMethods = {"testFeature1", "testFeature2"})
    public void testIntegration() {
        // Test integration
        System.out.println("Testing integration");
    }
}
</code></pre>

<h3 id="43-data-driven-testing-with-testng">4.3 Data-Driven Testing with TestNG</h3>

<p>Use TestNG's data provider for parameterized tests:</p>

<pre><code>package com.example.tests;

import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.*;

public class DataDrivenLoginTest {

    private WebDriver driver;

    @BeforeClass
    public void setupClass() {
        WebDriverManager.chromedriver().setup();
    }

    @BeforeMethod
    public void setupMethod() {
        driver = new ChromeDriver();
        driver.manage().window().maximize();
    }

    @DataProvider(name = "loginData")
    public Object[][] loginData() {
        return new Object[][] {
            {"validuser", "validpass", true, "Welcome, Valid User"},
            {"invaliduser", "invalidpass", false, "Invalid credentials"},
            {"validuser", "invalidpass", false, "Invalid credentials"},
            {"", "", false, "Username and password are required"}
        };
    }

    @Test(dataProvider = "loginData")
    public void testLogin(String username, String password, boolean shouldSucceed, String expectedMessage) {
        driver.get("https://example.com/login");

        driver.findElement(By.id("username")).sendKeys(username);
        driver.findElement(By.id("password")).sendKeys(password);
        driver.findElement(By.id("login-button")).click();

        if (shouldSucceed) {
            String welcomeMessage = driver.findElement(By.className("welcome-message")).getText();
            Assert.assertEquals(welcomeMessage, expectedMessage);
        } else {
            String errorMessage = driver.findElement(By.className("error-message")).getText();
            Assert.assertEquals(errorMessage, expectedMessage);
        }
    }

    @AfterMethod
    public void tearDown() {
        if (driver != null) {
            driver.quit();
        }
    }
}
</code></pre>

<h3 id="44-parallel-test-execution">4.4 Parallel Test Execution</h3>

<p>Configure parallel execution in <code>testng.xml</code>:</p>

<pre><code>&lt;!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd"&gt;
&lt;suite name="Parallel Tests Suite" parallel="methods" thread-count="4"&gt;
    &lt;test name="Parallel Tests"&gt;
        &lt;classes&gt;
            &lt;class name="com.example.tests.ParallelTest"/&gt;
        &lt;/classes&gt;
    &lt;/test&gt;
&lt;/suite&gt;
</code></pre>

<p>Implement tests that can run in parallel:</p>

<p>```java
package com.example.tests;</p>

<p>import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.*;</p>

<p>public class ParallelTest {</p>

<pre><code>@BeforeClass
public static void setupClass() {
    WebDriverManager.chromedriver().setup();
}

@Test
public void testCompleteWorkflow() {
    // Complete test implementation
    loginPage.login("user@example.com", "password");
    dashboardPage.navigateToReports();
    reportsPage.generateReport("monthly");
    Assert.assertTrue(reportsPage.isReportGenerated());
}
</code></pre>

<h2 id="summary">Summary</h2>

<p>This module covered the integration of WebDriverIO with TestNG, providing you with the tools to create robust, organized, and maintainable test suites. TestNG's advanced features complement WebDriverIO's browser automation capabilities perfectly.</p>

<p><strong>Key takeaways:</strong></p>

<ol>
<li>TestNG provides powerful test organization and execution features</li>
<li>Data-driven testing with TestNG data providers enables comprehensive test coverage</li>
<li>TestNG's reporting capabilities offer detailed insights into test execution</li>
<li>Parallel execution with TestNG significantly improves test performance</li>
<li>Integration with CI/CD pipelines ensures continuous quality assurance</li>
</ol>

<p>In the next module, we'll explore real-world project implementation, applying all the concepts learned throughout the course.</p>

        <div class="module-navigation bottom-nav">
            <a href="Module_9__Custom_Commands_and_Utilities.html" class="nav-btn prev-btn">
                <i class="fas fa-chevron-left"></i> Previous: Custom Commands and Utilities
            </a>
            <a href="Module_11__Real-World_Project_Implementation.html" class="nav-btn next-btn">
                Next: Real-World Project Implementation <i class="fas fa-chevron-right"></i>
            </a>
        </div>

    </div>

    <script>
        // Initialize syntax highlighting
        hljs.highlightAll();
        
        // Initialize Mermaid diagrams
        mermaid.initialize({ 
            theme: 'dark',
            startOnLoad: true 
        });
    </script>
    <script src="../../js/courses/mermaid_enhanced.js"></script>
</body>
</html>
