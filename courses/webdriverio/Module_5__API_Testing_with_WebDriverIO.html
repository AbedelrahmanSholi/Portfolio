<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Security Meta Tags -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self';">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), speaker=()">

    <link rel="stylesheet" href="../../css/courses/course_portfolio_style.css">
    <link rel="stylesheet" href="../../css/courses/code_formatting_fix.css">
    <link rel="stylesheet" href="../../css/courses/enhanced_course_styling.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 5: API Testing with WebDriverIO - Test Automation Course</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="../../js/courses/mermaid_loader.js"></script>
    <script src="../../js/courses/diagram_loader.js"></script>
</head>
<body>
    <div class="course-content-wrapper">
        <div class="module-navigation">
            <a href="Module_4__Advanced_WebDriverIO_Features.html" class="nav-btn prev-btn">
                <i class="fas fa-chevron-left"></i> Previous: Advanced WebDriverIO Features
            </a>
            <a href="Module_6__Page_Object_Model.html" class="nav-btn next-btn">
                Next: Page Object Model <i class="fas fa-chevron-right"></i>
            </a>
        </div>

        <div class="module-content">
            <h1>Module 5: API Testing with WebDriverIO</h1>

            <h2>Overview</h2>
            <p>WebDriverIO provides a rich and extensive API that allows testers to interact with web applications in sophisticated ways. This module takes a deep dive into the WebDriverIO API, exploring advanced commands, browser interactions, and utility functions that can enhance your test automation capabilities.</p>

            <h2>Learning Objectives</h2>
            <p>By the end of this module, you will be able to:</p>
            <ol>
                <li>Understand and utilize advanced WebDriverIO commands</li>
                <li>Implement complex browser interactions and manipulations</li>
                <li>Work with browser windows, frames, and alerts</li>
                <li>Leverage WebDriverIO utility functions for common testing scenarios</li>
                <li>Debug and troubleshoot WebDriverIO commands</li>
            </ol>

            <h2>5.1 Advanced Element Commands</h2>
            <h3>Beyond Basic Interactions</h3>
            <p>WebDriverIO provides numerous commands beyond the basic click, setValue, and getText operations:</p>

            <pre><code class="language-javascript">// Check if element exists
const exists = await $('#element').isExisting();

// Check if element is displayed
const isVisible = await $('#element').isDisplayed();

// Check if element is enabled
const isEnabled = await $('#element').isEnabled();

// Check if element is selected (for checkboxes, radio buttons, options)
const isSelected = await $('#checkbox').isSelected();

// Get element location
const location = await $('#element').getLocation();
console.log(`X: ${location.x}, Y: ${location.y}`);

// Get element size
const size = await $('#element').getSize();
console.log(`Width: ${size.width}, Height: ${size.height}`);

// Get computed CSS property
const color = await $('#element').getCSSProperty('color');
console.log(`Color: ${color.value}`);</code></pre>

            <h3>Working with Multiple Elements</h3>
            <pre><code class="language-javascript">// Find all elements matching a selector
const elements = await $$('.item');

// Get count of elements
const count = await $$('.item').length;

// Filter elements
const visibleElements = await $$('.item').filter(async (element) => {
    return await element.isDisplayed();
});

// Find a specific element in a collection
const thirdElement = await $$('.item')[2];

// Check if any element in a collection contains specific text
const hasText = await $$('.item').some(async (element) => {
    const text = await element.getText();
    return text.includes('specific text');
});</code></pre>

            <h3>Shadow DOM Access</h3>
            <p>WebDriverIO provides excellent support for working with Shadow DOM:</p>
            <pre><code class="language-javascript">// Access element in shadow DOM
const shadowElement = await $('#shadow-host').shadow$('.shadow-element');

// Access multiple elements in shadow DOM
const shadowElements = await $('#shadow-host').shadow$$('.shadow-element');

// Nested shadow DOM
const nestedElement = await $('#outer-host').shadow$('#inner-host').shadow$('.inner-element');</code></pre>

            <h2>5.2 Advanced Browser Commands</h2>
            <h3>Browser Navigation</h3>
            <pre><code class="language-javascript">// Navigate to URL
await browser.url('https://example.com');

// Get current URL
const url = await browser.getUrl();

// Navigate back
await browser.back();

// Navigate forward
await browser.forward();

// Refresh page
await browser.refresh();

// Get page title
const title = await browser.getTitle();</code></pre>

            <h3>Browser Windows and Tabs</h3>
            <pre><code class="language-javascript">// Get current window handle
const currentWindow = await browser.getWindowHandle();

// Get all window handles
const handles = await browser.getWindowHandles();

// Switch to specific window
await browser.switchToWindow(handles[1]);

// Create new window
await browser.newWindow('https://example.com');

// Close current window
await browser.closeWindow();</code></pre>

            <h2>5.3 Advanced Waiting Strategies</h2>
            <h3>Custom Wait Conditions</h3>
            <pre><code class="language-javascript">// Wait until element is clickable
await $('#button').waitForClickable({ timeout: 5000 });

// Wait until element exists
await $('#element').waitForExist({ timeout: 5000 });

// Wait until element is displayed
await $('#element').waitForDisplayed({ timeout: 5000 });

// Wait for custom condition
await browser.waitUntil(async () => {
    const text = await $('#element').getText();
    return text === 'Expected Text';
}, {
    timeout: 10000,
    timeoutMsg: 'Expected text to be different after 10s',
    interval: 500  // Check every 500ms
});</code></pre>

            <h2>5.4 JavaScript Execution</h2>
            <h3>Executing JavaScript</h3>
            <pre><code class="language-javascript">// Execute simple script
const title = await browser.execute(() => {
    return document.title;
});

// Execute with arguments
const sum = await browser.execute((a, b) => {
    return a + b;
}, 5, 10);

// Modify DOM
await browser.execute(() => {
    document.body.style.backgroundColor = 'red';
});</code></pre>

            <h2>5.5 File Uploads and Downloads</h2>
            <h3>Handling File Uploads</h3>
            <pre><code class="language-javascript">// Upload file using input element
const filePath = '/path/to/file.jpg';
const remoteFilePath = await browser.uploadFile(filePath);
await $('#file-input').setValue(remoteFilePath);

// Upload multiple files
const filePaths = ['/path/to/file1.jpg', '/path/to/file2.jpg'];
const remoteFilePaths = await Promise.all(filePaths.map(path => browser.uploadFile(path)));
await $('#multiple-file-input').setValue(remoteFilePaths.join('\n'));</code></pre>

            <h2>5.6 Performance Testing</h2>
            <h3>Measuring Page Load Performance</h3>
            <pre><code class="language-javascript">// Get performance metrics
const performanceTiming = await browser.execute(() => {
    return JSON.stringify(performance.timing);
});

const metrics = JSON.parse(performanceTiming);

// Calculate key metrics
const pageLoadTime = metrics.loadEventEnd - metrics.navigationStart;
const domContentLoaded = metrics.domContentLoadedEventEnd - metrics.navigationStart;

console.log(`Page Load Time: ${pageLoadTime}ms`);
console.log(`DOM Content Loaded: ${domContentLoaded}ms`);</code></pre>

            <h2>Summary</h2>
            <p>This module provided a comprehensive deep dive into the WebDriverIO API, covering advanced element and browser commands, waiting strategies, JavaScript execution, file handling, and performance testing. By mastering these advanced features, you can create more robust, efficient, and powerful test automation solutions.</p>

            <p><strong>Key takeaways:</strong></p>
            <ol>
                <li>WebDriverIO provides a rich set of commands for complex element interactions and browser manipulations</li>
                <li>Advanced waiting strategies help handle asynchronous behavior and dynamic content</li>
                <li>JavaScript execution enables powerful browser-side operations and data extraction</li>
                <li>Performance testing capabilities help ensure optimal application performance</li>
                <li>Debugging tools and techniques are essential for troubleshooting test failures</li>
            </ol>

            <p>In the next module, we'll explore the Page Object Model pattern to organize and structure your test code effectively.</p>
        </div>

        <div class="module-navigation">
            <a href="Module_4__Advanced_WebDriverIO_Features.html" class="nav-btn prev-btn">
                <i class="fas fa-chevron-left"></i> Previous: Advanced WebDriverIO Features
            </a>
            <a href="Module_6__Page_Object_Model.html" class="nav-btn next-btn">
                Next: Page Object Model <i class="fas fa-chevron-right"></i>
            </a>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize syntax highlighting
            hljs.highlightAll();
            
            // Initialize Mermaid diagrams
            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({ 
                    startOnLoad: true, 
                    theme: "dark", 
                    securityLevel: "loose",
                    themeVariables: { 
                        primaryColor: "#3498db", 
                        primaryTextColor: "#fff", 
                        primaryBorderColor: "#1f77b4", 
                        lineColor: "#f8f9fa", 
                        secondaryColor: "#6c757d", 
                        tertiaryColor: "#2c3e50" 
                    } 
                });
            }
        });
    </script>
    <script src="../../js/courses/mermaid_enhanced.js"></script>
</body>
</html>

